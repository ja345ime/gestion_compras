========== INICIO SUPERVISOR ==========
‚û°Ô∏è Ejecutando automatizador_codex.py
‚û°Ô∏è Ejecutando pruebas (pytest)
üß™ STDOUT:

üß™ STDERR:
ImportError while loading conftest '/home/gestion_compras/tests/conftest.py'.
tests/conftest.py:8: in <module>
    from app import app as flask_app, db, crear_datos_iniciales
app/__init__.py:37: in <module>
    from .utils import (
app/utils.py:18: in <module>
    from .models import (
app/models.py:6: in <module>
    from .requisiciones.constants import ESTADO_INICIAL_REQUISICION
app/requisiciones/__init__.py:5: in <module>
    from . import routes
app/requisiciones/routes.py:20: in <module>
    from ..models import (
E   ImportError: cannot import name 'Requisicion' from partially initialized module 'app.models' (most likely due to a circular import) (/home/gestion_compras/app/models.py)

‚ö†Ô∏è Fallaron las pruebas. Reintentando con nuevo prompt.
‚û°Ô∏è Ejecutando automatizador_codex.py
‚û°Ô∏è Ejecutando pruebas (pytest)
üß™ STDOUT:

üß™ STDERR:
ImportError while loading conftest '/home/gestion_compras/tests/conftest.py'.
tests/conftest.py:8: in <module>
    from app import app as flask_app, db, crear_datos_iniciales
app/__init__.py:37: in <module>
    from .utils import (
app/utils.py:18: in <module>
    from .models import (
E   ImportError: cannot import name 'Rol' from 'app.models' (/home/gestion_compras/app/models.py)

üõ† Ejecutando codex_entorno.py
‚úÖ Supervisor finalizado

========== INICIO SUPERVISOR ==========
‚û°Ô∏è Ejecutando automatizador_codex.py
üì¶ Cambios detectados en requirements.txt. Instalando dependencias...
‚úÖ Dependencias instaladas correctamente.
‚û°Ô∏è Ejecutando pruebas (pytest)
üß™ STDOUT:

üß™ STDERR:
ImportError while loading conftest '/home/gestion_compras/tests/conftest.py'.
tests/conftest.py:8: in <module>
    from app import app as flask_app, db, crear_datos_iniciales
app/__init__.py:5: in <module>
    from . import routes
app/routes.py:8: in <module>
    from . import (
E   ImportError: cannot import name 'db' from partially initialized module 'app' (most likely due to a circular import) (/home/gestion_compras/app/__init__.py)

üìÑ Funciones da√±adas registradas: db
‚ö†Ô∏è Fallaron las pruebas. Reintentando con nuevo prompt.
‚û°Ô∏è Ejecutando automatizador_codex.py
üì¶ requirements.txt no ha cambiado. No se reinstalan dependencias.
‚û°Ô∏è Ejecutando pruebas (pytest)
üß™ STDOUT:
============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.5, pluggy-1.6.0
rootdir: /home/gestion_compras
configfile: pytest.ini
plugins: anyio-4.9.0, mock-3.14.1
collected 5 items / 6 errors

==================================== ERRORS ====================================
______________ ERROR collecting tests/test_flujo_requisiciones.py ______________
ImportError while importing test module '/home/gestion_compras/tests/test_flujo_requisiciones.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_flujo_requisiciones.py:21: in <module>
    from app import app as flask_app, db, crear_datos_iniciales
E   ImportError: cannot import name 'app' from 'app' (/home/gestion_compras/app/__init__.py)
____________________ ERROR collecting tests/test_limpiar.py ____________________
ImportError while importing test module '/home/gestion_compras/tests/test_limpiar.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_limpiar.py:6: in <module>
    from app.models import Requisicion, Usuario
E   ImportError: cannot import name 'Requisicion' from 'app.models' (/home/gestion_compras/app/models.py)
___________________ ERROR collecting tests/test_permisos.py ____________________
ImportError while importing test module '/home/gestion_compras/tests/test_permisos.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_permisos.py:5: in <module>
    from app.models import Usuario, Rol, Departamento, Requisicion
E   ImportError: cannot import name 'Usuario' from 'app.models' (/home/gestion_compras/app/models.py)
_____________________ ERROR collecting tests/test_roles.py _____________________
ImportError while importing test module '/home/gestion_compras/tests/test_roles.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_roles.py:3: in <module>
    from app.models import Usuario, Rol, Requisicion
E   ImportError: cannot import name 'Usuario' from 'app.models' (/home/gestion_compras/app/models.py)
___________________ ERROR collecting tests/test_usuarios.py ____________________
ImportError while importing test module '/home/gestion_compras/tests/test_usuarios.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_usuarios.py:5: in <module>
    from app.models import Usuario, Rol, AuditoriaAcciones
E   ImportError: cannot import name 'Usuario' from 'app.models' (/home/gestion_compras/app/models.py)
____________________ ERROR collecting tests/test_vistas.py _____________________
ImportError while importing test module '/home/gestion_compras/tests/test_vistas.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_vistas.py:4: in <module>
    from app.models import Usuario, Rol
E   ImportError: cannot import name 'Usuario' from 'app.models' (/home/gestion_compras/app/models.py)
=========================== short test summary info ============================
ERROR tests/test_flujo_requisiciones.py
ERROR tests/test_limpiar.py
ERROR tests/test_permisos.py
ERROR tests/test_roles.py
ERROR tests/test_usuarios.py
ERROR tests/test_vistas.py
!!!!!!!!!!!!!!!!!!! Interrupted: 6 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 6 errors in 1.36s ===============================

üß™ STDERR:

‚ö†Ô∏è Fallaron las pruebas. Reintentando con nuevo prompt.
‚û°Ô∏è Ejecutando automatizador_codex.py
üì¶ requirements.txt no ha cambiado. No se reinstalan dependencias.
‚û°Ô∏è Ejecutando pruebas (pytest)
üß™ STDOUT:

üß™ STDERR:
ImportError while loading conftest '/home/gestion_compras/tests/conftest.py'.
tests/conftest.py:2: in <module>
    from app import create_app, db
app/__init__.py:5: in <module>
    db = SQLAlchemy(app)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/extension.py:278: in __init__
    self.init_app(app)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/extension.py:355: in init_app
    raise RuntimeError(
E   RuntimeError: Either 'SQLALCHEMY_DATABASE_URI' or 'SQLALCHEMY_BINDS' must be set.

‚ö†Ô∏è Fallaron las pruebas. Reintentando con nuevo prompt.
‚û°Ô∏è Ejecutando automatizador_codex.py
üì¶ requirements.txt no ha cambiado. No se reinstalan dependencias.
‚û°Ô∏è Ejecutando pruebas (pytest)
üß™ STDOUT:
============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.5, pluggy-1.6.0
rootdir: /home/gestion_compras
configfile: pytest.ini
plugins: anyio-4.9.0, mock-3.14.1
collected 5 items / 6 errors

==================================== ERRORS ====================================
______________ ERROR collecting tests/test_flujo_requisiciones.py ______________
ImportError while importing test module '/home/gestion_compras/tests/test_flujo_requisiciones.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_flujo_requisiciones.py:21: in <module>
    from app import app as flask_app, db, crear_datos_iniciales
E   ImportError: cannot import name 'app' from 'app' (/home/gestion_compras/app/__init__.py)
____________________ ERROR collecting tests/test_limpiar.py ____________________
ImportError while importing test module '/home/gestion_compras/tests/test_limpiar.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_limpiar.py:6: in <module>
    from app.models import Requisicion, Usuario
app/models.py:2: in <module>
    from yourapp import db
E   ModuleNotFoundError: No module named 'yourapp'
___________________ ERROR collecting tests/test_permisos.py ____________________
ImportError while importing test module '/home/gestion_compras/tests/test_permisos.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_permisos.py:5: in <module>
    from app.models import Usuario, Rol, Departamento, Requisicion
app/models.py:2: in <module>
    from yourapp import db
E   ModuleNotFoundError: No module named 'yourapp'
_____________________ ERROR collecting tests/test_roles.py _____________________
ImportError while importing test module '/home/gestion_compras/tests/test_roles.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_roles.py:3: in <module>
    from app.models import Usuario, Rol, Requisicion
app/models.py:2: in <module>
    from yourapp import db
E   ModuleNotFoundError: No module named 'yourapp'
___________________ ERROR collecting tests/test_usuarios.py ____________________
ImportError while importing test module '/home/gestion_compras/tests/test_usuarios.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_usuarios.py:5: in <module>
    from app.models import Usuario, Rol, AuditoriaAcciones
app/models.py:2: in <module>
    from yourapp import db
E   ModuleNotFoundError: No module named 'yourapp'
____________________ ERROR collecting tests/test_vistas.py _____________________
ImportError while importing test module '/home/gestion_compras/tests/test_vistas.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_vistas.py:4: in <module>
    from app.models import Usuario, Rol
app/models.py:2: in <module>
    from yourapp import db
E   ModuleNotFoundError: No module named 'yourapp'
=========================== short test summary info ============================
ERROR tests/test_flujo_requisiciones.py
ERROR tests/test_limpiar.py
ERROR tests/test_permisos.py
ERROR tests/test_roles.py
ERROR tests/test_usuarios.py
ERROR tests/test_vistas.py
!!!!!!!!!!!!!!!!!!! Interrupted: 6 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 6 errors in 1.14s ===============================

üß™ STDERR:

‚ö†Ô∏è Fallaron las pruebas. Reintentando con nuevo prompt.
‚û°Ô∏è Ejecutando automatizador_codex.py
üì¶ requirements.txt no ha cambiado. No se reinstalan dependencias.
‚û°Ô∏è Ejecutando pruebas (pytest)
üß™ STDOUT:
============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.5, pluggy-1.6.0
rootdir: /home/gestion_compras
configfile: pytest.ini
plugins: anyio-4.9.0, mock-3.14.1
collected 5 items / 5 errors

==================================== ERRORS ====================================
____________________ ERROR collecting tests/test_limpiar.py ____________________
tests/test_limpiar.py:6: in <module>
    from app.models import Requisicion, Usuario
app/models.py:3: in <module>
    class Usuario(db.Model):
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:92: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_api.py:198: in __init__
    _as_declarative(reg, cls, dict_)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:244: in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:325: in setup_mapping
    return _ClassScanMapperConfig(
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:580: in __init__
    self._early_mapping(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:366: in _early_mapping
    self.map(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:1988: in map
    mapper_cls(self.cls, self.local_table, **self.mapper_args),
<string>:2: in __init__
    ???
/usr/local/lib/python3.10/dist-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:866: in __init__
    self._configure_pks()
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:1652: in _configure_pks
    raise sa_exc.ArgumentError(
E   sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuario(usuario)] could not assemble any primary key columns for mapped table 'usuario'
___________________ ERROR collecting tests/test_permisos.py ____________________
tests/test_permisos.py:5: in <module>
    from app.models import Usuario, Rol, Departamento, Requisicion
app/models.py:3: in <module>
    class Usuario(db.Model):
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:92: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_api.py:198: in __init__
    _as_declarative(reg, cls, dict_)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:244: in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:325: in setup_mapping
    return _ClassScanMapperConfig(
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:580: in __init__
    self._early_mapping(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:366: in _early_mapping
    self.map(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:1988: in map
    mapper_cls(self.cls, self.local_table, **self.mapper_args),
<string>:2: in __init__
    ???
/usr/local/lib/python3.10/dist-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:866: in __init__
    self._configure_pks()
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:1652: in _configure_pks
    raise sa_exc.ArgumentError(
E   sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuario(usuario)] could not assemble any primary key columns for mapped table 'usuario'
_____________________ ERROR collecting tests/test_roles.py _____________________
tests/test_roles.py:3: in <module>
    from app.models import Usuario, Rol, Requisicion
app/models.py:3: in <module>
    class Usuario(db.Model):
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:92: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_api.py:198: in __init__
    _as_declarative(reg, cls, dict_)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:244: in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:325: in setup_mapping
    return _ClassScanMapperConfig(
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:580: in __init__
    self._early_mapping(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:366: in _early_mapping
    self.map(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:1988: in map
    mapper_cls(self.cls, self.local_table, **self.mapper_args),
<string>:2: in __init__
    ???
/usr/local/lib/python3.10/dist-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:866: in __init__
    self._configure_pks()
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:1652: in _configure_pks
    raise sa_exc.ArgumentError(
E   sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuario(usuario)] could not assemble any primary key columns for mapped table 'usuario'
___________________ ERROR collecting tests/test_usuarios.py ____________________
tests/test_usuarios.py:5: in <module>
    from app.models import Usuario, Rol, AuditoriaAcciones
app/models.py:3: in <module>
    class Usuario(db.Model):
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:92: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_api.py:198: in __init__
    _as_declarative(reg, cls, dict_)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:244: in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:325: in setup_mapping
    return _ClassScanMapperConfig(
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:580: in __init__
    self._early_mapping(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:366: in _early_mapping
    self.map(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:1988: in map
    mapper_cls(self.cls, self.local_table, **self.mapper_args),
<string>:2: in __init__
    ???
/usr/local/lib/python3.10/dist-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:866: in __init__
    self._configure_pks()
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:1652: in _configure_pks
    raise sa_exc.ArgumentError(
E   sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuario(usuario)] could not assemble any primary key columns for mapped table 'usuario'
____________________ ERROR collecting tests/test_vistas.py _____________________
tests/test_vistas.py:4: in <module>
    from app.models import Usuario, Rol
app/models.py:3: in <module>
    class Usuario(db.Model):
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:92: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_api.py:198: in __init__
    _as_declarative(reg, cls, dict_)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:244: in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:325: in setup_mapping
    return _ClassScanMapperConfig(
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:580: in __init__
    self._early_mapping(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:366: in _early_mapping
    self.map(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:1988: in map
    mapper_cls(self.cls, self.local_table, **self.mapper_args),
<string>:2: in __init__
    ???
/usr/local/lib/python3.10/dist-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:866: in __init__
    self._configure_pks()
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:1652: in _configure_pks
    raise sa_exc.ArgumentError(
E   sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuario(usuario)] could not assemble any primary key columns for mapped table 'usuario'
=============================== warnings summary ===============================
../../usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144
../../usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144
../../usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144
../../usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144
  /usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: SAWarning: This declarative base already contains a class with the same class name and module name as app.models.Usuario, and will be replaced in the string-lookup table.
    super().__init__(name, bases, d, **kwargs)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR tests/test_limpiar.py - sqlalchemy.exc.ArgumentError: Mapper Mapper[Usu...
ERROR tests/test_permisos.py - sqlalchemy.exc.ArgumentError: Mapper Mapper[Us...
ERROR tests/test_roles.py - sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuar...
ERROR tests/test_usuarios.py - sqlalchemy.exc.ArgumentError: Mapper Mapper[Us...
ERROR tests/test_vistas.py - sqlalchemy.exc.ArgumentError: Mapper Mapper[Usua...
!!!!!!!!!!!!!!!!!!! Interrupted: 5 errors during collection !!!!!!!!!!!!!!!!!!!!
======================== 4 warnings, 5 errors in 5.09s =========================

üß™ STDERR:

üîÅ Mismo error detectado 1 veces
‚ö†Ô∏è Fallaron las pruebas. Reintentando con nuevo prompt.
‚û°Ô∏è Ejecutando automatizador_codex.py
üì¶ requirements.txt no ha cambiado. No se reinstalan dependencias.
‚û°Ô∏è Ejecutando pruebas (pytest)
üß™ STDOUT:
============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.5, pluggy-1.6.0
rootdir: /home/gestion_compras
configfile: pytest.ini
plugins: anyio-4.9.0, mock-3.14.1
collected 5 items / 5 errors

==================================== ERRORS ====================================
____________________ ERROR collecting tests/test_limpiar.py ____________________
tests/test_limpiar.py:6: in <module>
    from app.models import Requisicion, Usuario
app/models.py:3: in <module>
    class Usuario(db.Model):
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:92: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_api.py:198: in __init__
    _as_declarative(reg, cls, dict_)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:244: in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:325: in setup_mapping
    return _ClassScanMapperConfig(
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:580: in __init__
    self._early_mapping(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:366: in _early_mapping
    self.map(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:1988: in map
    mapper_cls(self.cls, self.local_table, **self.mapper_args),
<string>:2: in __init__
    ???
/usr/local/lib/python3.10/dist-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:866: in __init__
    self._configure_pks()
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:1652: in _configure_pks
    raise sa_exc.ArgumentError(
E   sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuario(usuario)] could not assemble any primary key columns for mapped table 'usuario'
___________________ ERROR collecting tests/test_permisos.py ____________________
tests/test_permisos.py:5: in <module>
    from app.models import Usuario, Rol, Departamento, Requisicion
app/models.py:3: in <module>
    class Usuario(db.Model):
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:92: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_api.py:198: in __init__
    _as_declarative(reg, cls, dict_)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:244: in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:325: in setup_mapping
    return _ClassScanMapperConfig(
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:580: in __init__
    self._early_mapping(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:366: in _early_mapping
    self.map(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:1988: in map
    mapper_cls(self.cls, self.local_table, **self.mapper_args),
<string>:2: in __init__
    ???
/usr/local/lib/python3.10/dist-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:866: in __init__
    self._configure_pks()
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:1652: in _configure_pks
    raise sa_exc.ArgumentError(
E   sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuario(usuario)] could not assemble any primary key columns for mapped table 'usuario'
_____________________ ERROR collecting tests/test_roles.py _____________________
tests/test_roles.py:3: in <module>
    from app.models import Usuario, Rol, Requisicion
app/models.py:3: in <module>
    class Usuario(db.Model):
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:92: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_api.py:198: in __init__
    _as_declarative(reg, cls, dict_)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:244: in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:325: in setup_mapping
    return _ClassScanMapperConfig(
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:580: in __init__
    self._early_mapping(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:366: in _early_mapping
    self.map(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:1988: in map
    mapper_cls(self.cls, self.local_table, **self.mapper_args),
<string>:2: in __init__
    ???
/usr/local/lib/python3.10/dist-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:866: in __init__
    self._configure_pks()
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:1652: in _configure_pks
    raise sa_exc.ArgumentError(
E   sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuario(usuario)] could not assemble any primary key columns for mapped table 'usuario'
___________________ ERROR collecting tests/test_usuarios.py ____________________
tests/test_usuarios.py:5: in <module>
    from app.models import Usuario, Rol, AuditoriaAcciones
app/models.py:3: in <module>
    class Usuario(db.Model):
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:92: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_api.py:198: in __init__
    _as_declarative(reg, cls, dict_)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:244: in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:325: in setup_mapping
    return _ClassScanMapperConfig(
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:580: in __init__
    self._early_mapping(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:366: in _early_mapping
    self.map(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:1988: in map
    mapper_cls(self.cls, self.local_table, **self.mapper_args),
<string>:2: in __init__
    ???
/usr/local/lib/python3.10/dist-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:866: in __init__
    self._configure_pks()
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:1652: in _configure_pks
    raise sa_exc.ArgumentError(
E   sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuario(usuario)] could not assemble any primary key columns for mapped table 'usuario'
____________________ ERROR collecting tests/test_vistas.py _____________________
tests/test_vistas.py:4: in <module>
    from app.models import Usuario, Rol
app/models.py:3: in <module>
    class Usuario(db.Model):
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:92: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: in __init__
    super().__init__(name, bases, d, **kwargs)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_api.py:198: in __init__
    _as_declarative(reg, cls, dict_)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:244: in _as_declarative
    return _MapperConfig.setup_mapping(registry, cls, dict_, None, {})
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:325: in setup_mapping
    return _ClassScanMapperConfig(
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:580: in __init__
    self._early_mapping(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:366: in _early_mapping
    self.map(mapper_kw)
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/decl_base.py:1988: in map
    mapper_cls(self.cls, self.local_table, **self.mapper_args),
<string>:2: in __init__
    ???
/usr/local/lib/python3.10/dist-packages/sqlalchemy/util/deprecations.py:281: in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:866: in __init__
    self._configure_pks()
/usr/local/lib/python3.10/dist-packages/sqlalchemy/orm/mapper.py:1652: in _configure_pks
    raise sa_exc.ArgumentError(
E   sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuario(usuario)] could not assemble any primary key columns for mapped table 'usuario'
=============================== warnings summary ===============================
../../usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144
../../usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144
../../usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144
../../usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144
  /usr/local/lib/python3.10/dist-packages/flask_sqlalchemy/model.py:144: SAWarning: This declarative base already contains a class with the same class name and module name as app.models.Usuario, and will be replaced in the string-lookup table.
    super().__init__(name, bases, d, **kwargs)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
ERROR tests/test_limpiar.py - sqlalchemy.exc.ArgumentError: Mapper Mapper[Usu...
ERROR tests/test_permisos.py - sqlalchemy.exc.ArgumentError: Mapper Mapper[Us...
ERROR tests/test_roles.py - sqlalchemy.exc.ArgumentError: Mapper Mapper[Usuar...
ERROR tests/test_usuarios.py - sqlalchemy.exc.ArgumentError: Mapper Mapper[Us...
ERROR tests/test_vistas.py - sqlalchemy.exc.ArgumentError: Mapper Mapper[Usua...
!!!!!!!!!!!!!!!!!!! Interrupted: 5 errors during collection !!!!!!!!!!!!!!!!!!!!
======================== 4 warnings, 5 errors in 4.74s =========================

üß™ STDERR:

üîÅ Mismo error detectado 2 veces
‚ö†Ô∏è Fallaron las pruebas. Reintentando con nuevo prompt.
‚û°Ô∏è Ejecutando automatizador_codex.py
üì¶ requirements.txt no ha cambiado. No se reinstalan dependencias.
‚û°Ô∏è Ejecutando pruebas (pytest)
üß™ STDOUT:
============================= test session starts ==============================
platform linux -- Python 3.10.12, pytest-8.3.5, pluggy-1.6.0
rootdir: /home/gestion_compras
configfile: pytest.ini
plugins: anyio-4.9.0, mock-3.14.1
collected 22 items / 3 errors

==================================== ERRORS ====================================
____________________ ERROR collecting tests/test_limpiar.py ____________________
ImportError while importing test module '/home/gestion_compras/tests/test_limpiar.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_limpiar.py:7: in <module>
    from app import limpiar_requisiciones_viejas
E   ImportError: cannot import name 'limpiar_requisiciones_viejas' from 'app' (/home/gestion_compras/app/__init__.py)
_____________________ ERROR collecting tests/test_roles.py _____________________
ImportError while importing test module '/home/gestion_compras/tests/test_roles.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_roles.py:5: in <module>
    from tests.conftest import crear_usuario
E   ImportError: cannot import name 'crear_usuario' from 'tests.conftest' (/home/gestion_compras/tests/conftest.py)
____________________ ERROR collecting tests/test_vistas.py _____________________
ImportError while importing test module '/home/gestion_compras/tests/test_vistas.py'.
Hint: make sure your test modules/packages have valid Python names.
Traceback:
/usr/lib/python3.10/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
tests/test_vistas.py:6: in <module>
    from tests.conftest import crear_usuario
E   ImportError: cannot import name 'crear_usuario' from 'tests.conftest' (/home/gestion_compras/tests/conftest.py)
=========================== short test summary info ============================
ERROR tests/test_limpiar.py
ERROR tests/test_roles.py
ERROR tests/test_vistas.py
!!!!!!!!!!!!!!!!!!! Interrupted: 3 errors during collection !!!!!!!!!!!!!!!!!!!!
============================== 3 errors in 1.03s ===============================

üß™ STDERR:

üîÅ Mismo error detectado 3 veces
‚ùå Se alcanz√≥ el m√°ximo de reintentos o de errores repetidos.
üìÑ Generado nuevo prompt_actual.txt basado en el error detectado.
